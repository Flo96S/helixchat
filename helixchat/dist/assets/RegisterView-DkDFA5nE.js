import{P as v}from"./PasswordToggle-DxyulS-P.js";import{d as k,r as c,e as n,_ as x,f as P,o as _,c as S,a as e,w as r,v as p,g as b,b as y,h as I,i as T,j as V}from"./index-LACCAfl5.js";import{a as U}from"./axios-B4uVmeYG.js";const C=k({beforeMount(){localStorage.getItem("hash")&&localStorage.getItem("token")?c.replace("/"):sessionStorage.getItem("hash")&&sessionStorage.getItem("token")&&c.replace("/")},name:"RegisterView",components:{PasswordToggle:v},setup(){const o=n(""),s=n(""),m=n(""),u=n(""),w=n(""),i=n(!1),d=n(!1),t=async a=>{const g="https://www2.hs-esslingen.de/~melcher/map/chat/api/";try{const l=await U.get(g,{params:{request:"register",userid:a.username,password:a.password,nickname:a.nickname,fullname:a.fullname},headers:{"Content-Type":"application/json",Accept:"application/json"}}),f=l.data.hash,h=l.data.token;return d.value?(console.log("Staying logged in"),localStorage.setItem("hash",f),localStorage.setItem("token",h)):(console.log("Not staying logged in"),sessionStorage.setItem("hash",f),sessionStorage.setItem("token",h)),c.replace("/"),l.data}catch(l){throw console.error(l),l}};return{username:o,nickname:s,fullname:m,password:u,confirmPassword:w,showPassword:i,stayLoggedIn:d,register:async()=>{const a={username:o.value,nickname:s.value,fullname:m.value,password:u.value};try{await t(a)}catch(g){console.error("Registration failed:",g)}},goToLogin:()=>{c.replace("/login")},toggleShowPassword:()=>{i.value=!i.value}}}}),L={class:"about flex flex-col items-center justify-center bg-gray-900 text-white"},R=e("img",{src:V,class:"img w-1/2 mb-4 mt-4"},null,-1),q=e("h1",{class:"text-2xl mb-4"},"Register",-1),j={class:"w-full max-w-xs"},M={class:"bg-gray-800 shadow-md rounded px-8 pt-6 pb-4 mb-4"},N={class:"mb-4"},$=e("label",{for:"username",class:"block text-gray-200 text-sm font-bold mb-2"},"Username (RZ-Id)",-1),B={class:"mb-4"},F=e("label",{for:"nickname",class:"block text-gray-200 text-sm font-bold mb-2"},"Nickname",-1),Z={class:"mb-4"},A=e("label",{for:"fullname",class:"block text-gray-200 text-sm font-bold mb-2"},"Fullname",-1),E={class:"mb-4"},G=e("label",{for:"password",class:"block text-gray-200 text-sm font-bold mb-2"},"Password",-1),z={class:"relative"},D=["type"],H={class:"mb-4"},J=e("label",{for:"confirm-password",class:"block text-gray-200 text-sm font-bold mb-2"},"Confirm Password",-1),K={class:"relative"},O=["type"],Q={class:"mb-6"},W={class:"inline-flex items-center text-sm text-gray-200"},X=e("span",{class:"noselect"},"Stay logged in",-1),Y={class:"flex items-center justify-center mb-4"},ee={class:"text-center"};function oe(o,s,m,u,w,i){const d=P("PasswordToggle");return _(),S("div",L,[R,q,e("div",j,[e("div",M,[e("div",N,[$,r(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=t=>o.username=t),name:"username",required:"",autocomplete:"username",class:"w-full appearance-none border rounded py-2 px-3 text-gray-800 leading-tight focus:outline-none focus:shadow-outline",type:"text",placeholder:"Username (RZ-Id)"},null,512),[[p,o.username]])]),e("div",B,[F,r(e("input",{id:"nickname","onUpdate:modelValue":s[1]||(s[1]=t=>o.nickname=t),name:"nickname",required:"",autocomplete:"nickname",class:"w-full appearance-none border rounded py-2 px-3 text-gray-800 leading-tight focus:outline-none focus:shadow-outline",type:"text",placeholder:"Nickname"},null,512),[[p,o.nickname]])]),e("div",Z,[A,r(e("input",{id:"fullname","onUpdate:modelValue":s[2]||(s[2]=t=>o.fullname=t),name:"fullname",required:"",autocomplete:"name",class:"w-full appearance-none border rounded py-2 px-3 text-gray-800 leading-tight focus:outline-none focus:shadow-outline",type:"text",placeholder:"Fullname"},null,512),[[p,o.fullname]])]),e("div",E,[G,e("div",z,[r(e("input",{id:"password","onUpdate:modelValue":s[3]||(s[3]=t=>o.password=t),name:"password",type:o.showPassword?"text":"password",required:"",autocomplete:"new-password",class:"w-full appearance-none border rounded py-2 px-3 text-gray-800 mb-3 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Password"},null,8,D),[[b,o.password]]),y(d,{showPassword:o.showPassword,onToggle:o.toggleShowPassword},null,8,["showPassword","onToggle"])])]),e("div",H,[J,e("div",K,[r(e("input",{id:"confirm-password","onUpdate:modelValue":s[4]||(s[4]=t=>o.confirmPassword=t),name:"confirm-password",type:o.showPassword?"text":"password",required:"",autocomplete:"new-password",class:"w-full appearance-none border rounded py-2 px-3 text-gray-800 mb-3 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Confirm Password"},null,8,O),[[b,o.confirmPassword]]),y(d,{showPassword:o.showPassword,onToggle:o.toggleShowPassword},null,8,["showPassword","onToggle"])])]),e("div",Q,[e("label",W,[r(e("input",{id:"stay-logged-in","onUpdate:modelValue":s[5]||(s[5]=t=>o.stayLoggedIn=t),type:"checkbox",class:"form-checkbox mr-2"},null,512),[[I,o.stayLoggedIn]]),X])]),e("div",Y,[e("button",{onClick:s[6]||(s[6]=(...t)=>o.register&&o.register(...t)),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit"},"Register")]),e("div",ee,[e("button",{onClick:s[7]||(s[7]=T((...t)=>o.goToLogin&&o.goToLogin(...t),["prevent"])),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded...",type:"button"},"Go to login")])])])])}const de=x(C,[["render",oe]]);export{de as default};
