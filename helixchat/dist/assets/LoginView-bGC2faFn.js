import{P as f}from"./PasswordToggle-DxyulS-P.js";import{d as b,r as l,e as i,_ as y,f as v,o as x,c as _,a as e,w as p,v as k,g as I,b as P,h as S,i as T,j as L}from"./index-LACCAfl5.js";import{a as V}from"./axios-B4uVmeYG.js";const C=b({beforeMount(){localStorage.getItem("hash")&&localStorage.getItem("token")?l.replace("/"):sessionStorage.getItem("hash")&&sessionStorage.getItem("token")&&l.replace("/")},name:"LoginView",components:{PasswordToggle:f},setup(){const o=i(""),s=i(""),a=i(!1),d=i(!1),u=async r=>{const g="https://www2.hs-esslingen.de/~melcher/map/chat/api/";try{const n=await V.get(g,{params:{request:"login",userid:r.username,password:r.password},headers:{"Content-Type":"application/json",Accept:"application/json"}}),h=n.data.hash,w=n.data.token;return d.value?(console.log("Staying logged in"),localStorage.setItem("hash",h),localStorage.setItem("token",w)):(console.log("Not staying logged in"),sessionStorage.setItem("hash",h),sessionStorage.setItem("token",w)),n.data}catch(n){throw console.error(n),n}},m=async()=>{const r={username:o.value,password:s.value};try{await u(r),l.replace("/")}catch(g){console.error("Login failed:",g)}};function c(){a.value=!a.value}function t(){l.replace("/register")}return{username:o,password:s,showPassword:a,stayLoggedIn:d,login:m,toggleShowPassword:c,goToRegister:t}}}),U={class:"about flex flex-col items-center justify-center bg-gray-900 text-white"},j=e("img",{src:L,class:"img w-1/2 mb-4 mt-4"},null,-1),M=e("h1",{class:"text-2xl mb-4"},"Login",-1),R={class:"w-full max-w-xs"},$={class:"bg-gray-800 shadow-md rounded px-8 pt-6 pb-4 mb-4"},B={class:"mb-4"},N=e("label",{for:"username",class:"block text-gray-200 text-sm font-bold mb-2"},"Username (RZ-Id)",-1),D={class:"mb-4"},Z=e("label",{for:"password",class:"block text-gray-200 text-sm font-bold mb-2"},"Password",-1),q={class:"relative"},A=["type"],E={class:"mb-6"},G={class:"inline-flex items-center text-sm text-gray-200"},z=e("span",{class:"noselect"},"Stay logged in",-1),F={class:"flex items-center justify-center mb-4"},H={class:"text-center"};function J(o,s,a,d,u,m){const c=v("PasswordToggle");return x(),_("div",U,[j,M,e("div",R,[e("div",$,[e("div",B,[N,p(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=t=>o.username=t),name:"username",type:"text",placeholder:"Username - RZ-Id",class:"w-full appearance-none border rounded py-2 px-3 text-gray-800 leading-tight focus:outline-none focus:shadow-outline"},null,512),[[k,o.username]])]),e("div",D,[Z,e("div",q,[p(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=t=>o.password=t),name:"password",type:o.showPassword?"text":"password",placeholder:"Password",class:"w-full appearance-none border rounded py-2 px-3 text-gray-800 mb-3 leading-tight focus:outline-none focus:shadow-outline"},null,8,A),[[I,o.password]]),P(c,{showPassword:o.showPassword,onToggle:o.toggleShowPassword},null,8,["showPassword","onToggle"])])]),e("div",E,[e("label",G,[p(e("input",{id:"loggedin",type:"checkbox",class:"form-checkbox mr-2","onUpdate:modelValue":s[2]||(s[2]=t=>o.stayLoggedIn=t)},null,512),[[S,o.stayLoggedIn]]),z])]),e("div",F,[e("button",{onClick:s[3]||(s[3]=T((...t)=>o.login&&o.login(...t),["prevent"])),class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button"},"Login")]),e("div",H,[e("button",{onClick:s[4]||(s[4]=(...t)=>o.goToRegister&&o.goToRegister(...t)),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",type:"button"},"Go to register")])])])])}const W=y(C,[["render",J]]);export{W as default};
